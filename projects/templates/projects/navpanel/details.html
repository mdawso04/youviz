{% load humanize %}
{% load customfilters %}

<div class="d-flex offcanvas-header p-3">
    <h5 class="offcanvas-title me-auto" id="offcanvasBottomLabel">Viz Details</h5>
    <!--<div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="maximize"
               onclick="vizOffcanvasMaximize(this, '#offcanvasBottom-{{vid}}');" checked>
    </div>-->
    <button type="button" class="btn-close text-reset" onclick="Handler.navigator.toggleNav();" aria-label="Close"></button>
</div>
                
<div class="offcanvas-body test-edit-inner p-2" style="overflow-x: auto;">
    <div class="mb-2 p-2 p-md-3 position-relative rounded-3 bg-white" style="" 
         onclick="Handler.showTab('#navpane-pills-edit-tab');">
        <h6 class="mb-0" style="">{{ datasource.name }}</h6>
        <small class="text-muted">{{ datasource.description }}</small>
        
        
        {% comment %}
        {% for v in datasource.vizs.all %}
        <button type="button" class="btn btn-sm btn-outline-info" style="font-size: 0.8rem;" onclick="alert('Jump to Page {{ forloop.counter }}'); event.stopPropagation();">
            Page {{ forloop.counter }}
        </button>
        {% endfor %}
        {% endcomment %}
        
    </div>
    
    <div class="comments mb-2 p-2 p-md-3 position-relative rounded-3 bg-white" 
         style="">
        <h6 class="mb-0" style="">{{ datasource.datastream.name }}</h6>
        <small class="text-muted">
             {{ datasource.datastream.last_cached|naturalday|capfirst }}ãƒ»{{ datasource.datastream.datasources.count }} viz{{ datasource.datastream.datasources.count|pluralize }}
        </small>
        
        <div class="gallery d-flex align-items-center position-relative bg-transparent" style="">
            <button class="border-0 rounded-circle p-1 me-2 mt-1" 
                    style="font-size: 0.5rem; min-height: 20px; max-height: 20px; min-width: 20px; min-width: 20px; 
                           background-color: {{datasource.datastream.owner.profiles.properties.profile_color|default:'#0dcaf0'}} !important"
                    data-bs-toggle="tooltip" data-bs-placement="top" title="Vizualized by {{ datasource.datastream.owner.profiles.name }}">
                {{ datasource.datastream.owner.profiles.name | first | upper}}
            </button>
            <div>
                <p class="text-secondary text-decoration-none mb-0 fw-bold" style="font-size: 0.7rem; line-height: 0.5;">
                    {{ datasource.datastream.owner.profiles.name }} 
                </p>
            </div>
        </div>
        
    </div>
    
    {% if ready %}
    <div class="comments mb-2 p-2 position-relative rounded-3 bg-white" 
         onclick="Handler.showTab('#navpane-pills-comments-tab');">
        <p class="text-body text-decoration-none mb-0 fw-bold" style="font-size: 0.8rem;">Comments</p>
        <p class="text-secondary text-decoration-none" style="font-size: 0.7rem;">The thing I like about this viz is that is uses open source data!</p>
    </div>
    
    <div class="comments mb-2 p-2 position-relative rounded-3 bg-white" style="">
        <p class="text-body text-decoration-none mb-0 fw-bold" style="font-size: 0.8rem;">Datasource</p>
        <p class="text-secondary text-decoration-none" style="font-size: 0.7rem;">{{ datasource.datastream.name }}</p>
        
        <div class="yv-component dsthumb" 
             id="yv-component-dsthumb-{{ datasource.pk }}"
             data-yv-component="dsthumb"
             data-yv-id="{{ datasource.pk }}"
             data-yv-link="{{ datasource.get_absolute_url_viewmode }}"
             data-yv-button=""
             data-yv-init="dsThumbInit"
             style="max-height: 60px; max-width: 100px;">
        </div>
        
        <img id="jpg-export"/>
        
    </div> 
    {% endif %}
</div>



