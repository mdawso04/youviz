{% comment %}
{% extends "base.html" %}
{% block page_content %}{% endblock %}
{% endcomment %}

{% load unicorn %} 
<!doctype html>
<html>
    <head>
        <title>Table</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
              integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <!-- custom css & js -->
        <link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />
        <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.20.2/dist/bootstrap-table.min.css">

        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
                integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

        <script src="https://unpkg.com/bootstrap-table@1.20.2/dist/bootstrap-table.min.js"></script>

        {% unicorn_scripts %}
        {% load static %}
        
        <style>
          .overlay {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 10000;
            top: 40%;
            left: 0px;
              {% comment %}opacity: 0.5;
              filter: alpha(opacity=50);{% endcomment %}
        }
        </style>
    </head>

    <body id="body">
        {% csrf_token %}
        {% unicorn 'app' id=1 %}
        <script type="application/javascript">
            function elementUpdate(u) {
                //var element = document.getElementById("viz-121-tab");
                var element = document.getElementById(u[0]);
                element.innerHTML = u[1]; 
                alert(u);
            }
            // run on page load
            var loginModal = document.getElementById("staticBackdrop");
            var datatableModal = document.getElementById("modalTable");
            var body = document.getElementById("body");
            body.appendChild(loginModal) 
            body.appendChild(datatableModal) 

            window.addEventListener("DOMContentLoaded", (event) => {
                Unicorn.addEventListener("updated", (component) =>{
                    // load vizs
                    var arr = document.getElementsByClassName("youVizOnUpdate"); // only refreshed viz/s
                    for (var n = 0; n < arr.length; n++) {
                        eval(arr[n].innerHTML); // run script
                        //arr[n].classList.remove("youVizOnUpdate");// remove 'toBeUpdated' class 
                    }

                    //var bsTable = document.getElementById("table");
                    $('#tableId').bootstrapTable(); // init via javascript

                    var loginModal = document.getElementById("staticBackdrop");
                    var datatableModal = document.getElementById("modalTable");
                    var body = document.getElementById("body");
                    body.appendChild(loginModal); 
                    body.appendChild(datatableModal); 

                    var testOffCanvas = document.getElementById("OFFCANVAS");
                    var bsoc = bootstrap.Offcanvas.getOrCreateInstance(testOffCanvas);
                    bsoc.hide();

                    var testDropdown = document.getElementById("tab-add-dropdown");
                    var bsdd = bootstrap.Dropdown.getOrCreateInstance(testDropdown);
                    bsdd.dispose();
                    var bsdd = bootstrap.Dropdown.getOrCreateInstance(testDropdown);

                    var myDropzone = Dropzone.forElement("#drop");
                    myDropzone.destroy();
                    var myDropzone = new Dropzone("#drop");

                    alert(component.name);

                });
            });
        </script>
    </body>
</html>