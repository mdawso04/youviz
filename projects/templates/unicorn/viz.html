{% load customfilters %}
<div unicorn:view>
    <!-- PLOT -->
    {% with vids=viz.pk|stringformat:"s" %}
    {% with vid='viz-'|add:vids %}
    
    <div class="d-none" unicorn:key="viz-no-update{{vid}}"></div>
    
    <div id="outerOuterPlotBox-{{vid}}" class="sticky-top" style="z-index: 995">
        <div id="outerPlotBox-{{vid}}">
            <script type="application/json" id="youviz:data:{{vid}}">
            {"plot_data":{{viz.viz_html.plot_data|safe}}, "plot_layout":{{viz.viz_html.plot_layout|safe}}}
            </script>
            <div id="plotBox-{{vid}}" class="viz-container"></div>
        </div>
    </div>
    
    
    {% include '../projects/editpanel/editpanel.html' %}
    
    {% is_owner request.user viz as current_user_is_owner %} 
    <div class="position-relative pt-1 mx-2 viz-text-area text-secondary ts-6"
         {% if current_user_is_owner %}onclick="Handler.navigator.toggleEdit();"{% endif %}
         id="floatingTextarea2{{vid}}">
        {% if viz.description %}{{viz.description}}{% else %}No descriptoion.{% endif %}
    </div>
    {% endwith %}
    {% endwith %}
</div>